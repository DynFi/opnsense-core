{%
  set predefined = {
	"adu":"http://packages.dynfi.com/blacklist/adult.txt",
	"adv":"http://packages.dynfi.com/blacklist/advertise.txt",
	"agg":"http://packages.dynfi.com/blacklist/aggressive.txt",
	"alc":"http://packages.dynfi.com/blacklist/alcohol.txt",
	"ban":"http://packages.dynfi.com/blacklist/bank.txt",
	"blo":"http://packages.dynfi.com/blacklist/blog.txt",
	"cel":"http://packages.dynfi.com/blacklist/celebrity.txt",
	"cha":"http://packages.dynfi.com/blacklist/chat.txt",
	"coo":"http://packages.dynfi.com/blacklist/cooking.txt",
	"cry":"http://packages.dynfi.com/blacklist/crypto.txt",
	"cry":"http://packages.dynfi.com/blacklist/cryptocurrency.txt",
	"dan":"http://packages.dynfi.com/blacklist/dangerous_material.txt",
	"dat":"http://packages.dynfi.com/blacklist/dating.txt",
	"doh":"http://packages.dynfi.com/blacklist/doh.txt",
	"dru":"http://packages.dynfi.com/blacklist/drugs.txt",
	"edu":"http://packages.dynfi.com/blacklist/education.txt",
	"fil":"http://packages.dynfi.com/blacklist/filter_bypass.txt",
	"fin":"http://packages.dynfi.com/blacklist/finance.txt",
	"for":"http://packages.dynfi.com/blacklist/fortunetelling.txt",
	"for":"http://packages.dynfi.com/blacklist/forum.txt",
	"fr":"http://packages.dynfi.com/blacklist/fr_exam_cheaters.txt",
	"fra":"http://packages.dynfi.com/blacklist/fraud.txt",
	"gam":"http://packages.dynfi.com/blacklist/gamble.txt",
	"gam":"http://packages.dynfi.com/blacklist/gambling.txt",
	"gam":"http://packages.dynfi.com/blacklist/games.txt",
	"gov":"http://packages.dynfi.com/blacklist/government.txt",
	"hac":"http://packages.dynfi.com/blacklist/hacking.txt",
	"hom":"http://packages.dynfi.com/blacklist/homestyle.txt",
	"hos":"http://packages.dynfi.com/blacklist/hospitals.txt",
	"ima":"http://packages.dynfi.com/blacklist/imagehosting.txt",
	"isp":"http://packages.dynfi.com/blacklist/isp.txt",
	"job":"http://packages.dynfi.com/blacklist/jobsearch.txt",
	"lib":"http://packages.dynfi.com/blacklist/library.txt",
	"lin":"http://packages.dynfi.com/blacklist/lingerie.txt",
	"mal":"http://packages.dynfi.com/blacklist/malware.txt",
	"man":"http://packages.dynfi.com/blacklist/manga.txt",
	"mil":"http://packages.dynfi.com/blacklist/military.txt",
	"mov":"http://packages.dynfi.com/blacklist/movies.txt",
	"mus":"http://packages.dynfi.com/blacklist/music.txt",
	"new":"http://packages.dynfi.com/blacklist/new.txt",
	"new":"http://packages.dynfi.com/blacklist/news.txt",
	"pho":"http://packages.dynfi.com/blacklist/phone.txt",
	"pir":"http://packages.dynfi.com/blacklist/piracy.txt",
	"pod":"http://packages.dynfi.com/blacklist/podcasts.txt",
	"pol":"http://packages.dynfi.com/blacklist/politics.txt",
	"por":"http://packages.dynfi.com/blacklist/porn.txt",
	"pri":"http://packages.dynfi.com/blacklist/privacy.txt",
	"rad":"http://packages.dynfi.com/blacklist/radio.txt",
	"rea":"http://packages.dynfi.com/blacklist/reaffected.txt",
	"red":"http://packages.dynfi.com/blacklist/redirector.txt",
	"rel":"http://packages.dynfi.com/blacklist/religion.txt",
	"rem":"http://packages.dynfi.com/blacklist/remote_control.txt",
	"rin":"http://packages.dynfi.com/blacklist/ringtones.txt",
	"sci":"http://packages.dynfi.com/blacklist/science.txt",
	"sea":"http://packages.dynfi.com/blacklist/search_engnines.txt",
	"sex":"http://packages.dynfi.com/blacklist/sexual_education.txt",
	"sho":"http://packages.dynfi.com/blacklist/shopping.txt",
	"soc":"http://packages.dynfi.com/blacklist/social_media.txt",
	"spo":"http://packages.dynfi.com/blacklist/sports.txt",
	"sta":"http://packages.dynfi.com/blacklist/stalkerware.txt",
	"tra":"http://packages.dynfi.com/blacklist/translation.txt",
	"url":"http://packages.dynfi.com/blacklist/urlshortener.txt",
	"vid":"http://packages.dynfi.com/blacklist/video.txt",
	"vpn":"http://packages.dynfi.com/blacklist/vpn.txt",
	"wea":"http://packages.dynfi.com/blacklist/weapons.txt",
	"web":"http://packages.dynfi.com/blacklist/webmail.txt"
 }
%}
{%  if not helpers.empty('OPNsense.unboundplus.dnsbl.enabled') %}
[blacklists]
{%    if not helpers.empty('OPNsense.unboundplus.dnsbl.type') %}
{%      for shortcode in OPNsense.unboundplus.dnsbl.type.split(',') %}
{%        if shortcode in predefined %}
predefined_{{ shortcode }}={{ predefined[shortcode] }}
{%        else %}
#shortcode=##not_found##
{%        endif %}
{%      endfor %}
{%    endif %}
{%    if not helpers.empty('OPNsense.unboundplus.dnsbl.lists') %}
{%      for uri in OPNsense.unboundplus.dnsbl.lists.split(',') %}
custom_{{loop.index}}={{uri}}
{%      endfor %}
{%    endif %}

[exclude]
# exclude localhost entries
default_pattern_1=.*localhost$
# exclude non domain entries
default_pattern_2=^(?![a-zA-Z\d]).*

{%  endif %}
